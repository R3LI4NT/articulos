<p align="center">
  <a href="https://github.com/DenverCoder1/readme-typing-svg"><img src="https://readme-typing-svg.herokuapp.com?font=Fira+Code&size=19&pause=1000&color=D1F700&width=510&lines=Cracking+de+contraseñas+Windows+con+Mimikatz"></a>
</p>

<h1 align="center"></h1>

<h3 align="center"><ins>FUNCIONAMIENTO DE MIMIKATZ</ins></h3>

Mimikatz es una herramienta de código abierto creada por Benjamin Delpy, utilizada para extraer credenciales de seguridad almacenadas en sistemas Windows. Permite obtener hashes de contraseñas, tickets de autenticación y claves de sesión directamente desde la memoria del sistema. Su capacidad más destacada es realizar ataques de "pass the hash", permitiendo la autenticación en otros sistemas sin conocer la contraseña real. Esta herramienta es comúnmente usada tanto por profesionales de seguridad para evaluar vulnerabilidades como por cibercriminales para actos ilícitos.

#### Funcionalidades Principales
Dumping de Credenciales:

- **LSASS (Local Security Authority Subsystem Service)**: Mimikatz puede extraer las credenciales almacenadas en la memoria del proceso LSASS, incluyendo contraseñas en texto plano, hashes NTLM, y tickets de Kerberos.
DCSync: Simula el comportamiento de un controlador de dominio para solicitar información de replicación de contraseñas desde otros controladores de dominio, facilitando la obtención de contraseñas de usuarios sin tener acceso directo a los sistemas donde están almacenadas.
Manipulación de Tokens:

- **Pass-the-Hash**: Permite a los atacantes autenticarse utilizando un hash NTLM en lugar de la contraseña en texto claro.
Pass-the-Ticket: Usa tickets de Kerberos capturados para autenticarse en otros sistemas sin necesidad de conocer las credenciales originales.
Golden Ticket y Silver Ticket:

- **Golden Ticket**: Creación de tickets de concesión de Kerberos (TGT) falsos que permiten acceso a cualquier recurso en el dominio, normalmente utilizados para obtener acceso persistente.
Silver Ticket: Creación de tickets de servicio (TGS) que permiten acceso a servicios específicos sin necesidad de un TGT legítimo.

- **Kerberos Overpass-the-Hash (Pass-the-Key)**: Permite el uso de una contraseña de texto claro o un hash NTLM para solicitar un TGT Kerberos, facilitando el movimiento lateral en una red.

<p align="center">
  <img src="https://github.com/R3LI4NT/articulos/blob/main/Pentesting/O.S/img/mimikatz.png">
</p>

<h1 align="center"></h1>

### Cracking Password Windows

Para realizar la prueba de seguridad, he descargado la imagen de Windows 7 y la he configurado como máquina víctima. Desde Kali Linux, he establecido una bind shell en la máquina Windows 7. A través de esta bind shell, ejecutaré Mimikatz para crackear la contraseña.

![1](https://github.com/R3LI4NT/articulos/assets/75953873/cec702ea-dc48-403c-90fb-80555884325e)

![2](https://github.com/R3LI4NT/articulos/assets/75953873/d7b92af9-edb4-47cd-b767-efc5f2f87bff)

Inician Mimikatz.

![3](https://github.com/R3LI4NT/articulos/assets/75953873/2f000528-b12c-4a5e-86c1-956f2a233dbc)

El módulo  `privilege::debug` se utiliza para habilitar los privilegios de depuración en el sistema operativo. Esto es porque Mimikatz necesita ciertos privilegios elevados para realizar algunas operaciones que así lo requieran. 

![4](https://github.com/R3LI4NT/articulos/assets/75953873/b05ac400-9471-44fe-9b3b-8c63ee0a5530)

El módulo `sekurlsa::logonpasswords` se utiliza para extraer información de las credenciales de usuario almacenadas en la memoria del sistema operativo Windows. Este comando permite recuperar contraseñas en texto claro, hashes de contraseñas, tickets Kerberos y otros datos relacionados con las sesiones de inicio de sesión.

![5](https://github.com/R3LI4NT/articulos/assets/75953873/d50f179b-0b53-4886-badd-424012b8cef6)

Como se observa en la anterior captura, la contraseña fue extraída `SoyR3LI4NT`; pero a veces no suele ser tan fácil, este valor puede aparecer como dato de tipo `Null`. Entonces para ello lo debemos hacer es copiar el hash NTLM y lo guardamos en un fichero junto con el usuario (en este caso `Windows7:5fd443b9890d8aa8b5fcf26f090e743d`).

![6](https://github.com/R3LI4NT/articulos/assets/75953873/1acfca03-0066-4699-9bcf-3ac360965eb5)

![7](https://github.com/R3LI4NT/articulos/assets/75953873/a6863c50-089c-4a9f-b1f0-a081f94adff0)

Por último, con la herramienta de JohnTheRipper crackeamos el hash que guardamos.
```
john --wordlist=RUTA-DICCIONARIO --format=NT <hash>.txt
```

![8](https://github.com/R3LI4NT/articulos/assets/75953873/d665e6f9-99e4-495f-8e56-220cc538b8a5)

<h1 align="center"></h1>

</br>

#### MITIGAR EL RIESGO 

Para mitigar el riesgo asociado con Mimikatz se recomienda aplicar parches de seguridad y mantener antivirus actualizado, usar el modo "Protección adicional de credenciales" (Credential Guard), limitar los privilegios de los usuarios y las cuebtas de servicio. Por otro lado, implementar autenticación multifactor (MFA) ayuda a agregar una capa adicional de seguridad, así como también utilizar una contraseña fuerte.

</br>

<h1 align="center"></h1>

<h3 align="center"><ins>ADVERTENCIA<ins></h3>

<h4 align="center">Esto es con fines de aprendizaje, no nos hacemos responsables ni el fundador, ni el creador del tema del mal uso de esta herramienta u información.</h4>



#### ~R3LI4NT~
